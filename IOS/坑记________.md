# 坑记________

## 1. xcode高版本支持ios7设备调试:
1.  将7.1DeviceSupport文件放到/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/DeviceSupport
2. 将应用程序-xcode 显示包内容-Contents-Developer-Platforms-iPhoneOS.platform-Developer-SDKs-iPhoneOS.sdk-SDKSettings.plist 又没写 8.0 以下的 

	```
	Root/DefaultProperties/DEPLOYMENT_TARGET_SUGGESTE.../添加itemx=7.1
	```	
		
3. 把项目根目录下Tanker.xcodeproj
	1. 显示包内容
	2. 打开project.pbxproj
	3. 搜索TARGET_把值改成7.1

4. Finish


## 2. animate动画退后台后,再回前台动画停止;

#### 原因:
* ios默认系统会停掉;
	

#### 解决方式:

1. 把[UIView animate...]的方式改成CABaseAnimation实例的方式;代码如下:

	```objective-c
	
	if (![self.aLab.layer animationForKey:@"translationAnimation"]) {
	    CABasicAnimation* aAni = [CABasicAnimation animationWithKeyPath:@"transform.translation.x"];
	    aAni.toValue = [NSNumber numberWithFloat:-self.aLab.width];
	    aAni.duration = self.aLab.width / 20;
	    aAni.cumulative = YES;
	    aAni.removedOnCompletion = false;
	    aAni.delegate = self;
	    [self.aLab.layer addAnimation:aAni forKey:@"translationAnimation"];
	}

	```

2. 实现CAAnimationDelegate,代码如下

	```objective-c

	/**
	 *  MARK:--------------------CAAnimationDelegate--------------------
	 */
	- (void)animationDidStart:(CAAnimation *)anim{}
	
	- (void)animationDidStop:(CAAnimation *)anim finished:(BOOL)flag{
	    [self animationStop];
	    [self animationStart];
	}

	```
	
## 3. UIView animate:duration{}添加动画失败* 问题描述:	* 在detailGuideBeVipTopBar时,animationStart总是失败,发现refreshDisplay时,* 可能还未didAppear;但应该是已经addSubView了;所以这个添加动画失败应该是未didAppear而不是未addSubView;(未验证)* 同理,以前DTCoreText的resetLayout方法一直需要延迟也有可能是这个问题;(未验证)## 4. UIMenuController使用之坑

1. 必写:

```objective-c
[self becomeFirstResponder];//必写

UIMenuController *menuController = [UIMenuController sharedMenuController];
UIMenuItem *itemDelete = [[UIMenuItem alloc] initWithTitle:LOCALIZE_KEY(@"删除") action:@selector(deleteBtnOnClick:)];
UIMenuItem *itemReport = [[UIMenuItem alloc] initWithTitle:LOCALIZE_KEY(@"举报") action:@selector(reportBtnOnClick:)];
[menuController setMenuItems:@[itemDelete,itemReport]];
[menuController setTargetRect:self.descLab.bounds inView:self.descLab];
[menuController setMenuVisible:YES animated:YES];```2. 在本View.class类中必须实现两个方法:

```objective-c
-(BOOL)canBecomeFirstResponder{
    return YES;
}

-(BOOL)canPerformAction:(SEL)action withSender:(id)sender {
    if (action == @selector(deleteBtnOnClick:) || action == @selector(reportBtnOnClick:)){
        return YES;
    }
    return NO;
}
```
3. 必须实现每一个SEL

```objective-c
-(void) deleteBtnOnClick:(id)sender{
    if (self.delegate && [self.delegate respondsToSelector:@selector(veReplyPageHeader_DeleteBtnOnClick)]) {
        [self.delegate veReplyPageHeader_DeleteBtnOnClick];
    }
}

-(void) reportBtnOnClick:(id)sender{
    if (self.delegate && [self.delegate respondsToSelector:@selector(veReplyPageHeader_ReportBtnOnClick)]) {
        [self.delegate veReplyPageHeader_ReportBtnOnClick];
    }
}
```